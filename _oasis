OASISFormat:    0.4
Name:           pci
Version:        0.0.0
Synopsis:       Ctypes bindings to libpci for OCaml
Authors:        Si Beaumont
License:        MIT
Plugins:        DevFiles (0.4), META (0.4)
BuildTools:     ocamlbuild

Library pci
  Install:          true
  Path:             lib
  Modules:          Pci
  InternalModules:  Pci_bindings, Pci_generated
  CSources:         pci_stubs.c
  CCLib:            -lpci
  CCOpt:            -I $pkg_ctypes_stubs
  BuildDepends:     ctypes.stubs
  BuildTools:       pci_stubgen

Executable pci_stubgen
  Install:        false
  Path:           lib_gen
  MainIs:         pci_stubgen.ml
  BuildDepends:   ctypes.stubs

Executable pci_typegen_gen
  Install: false
  Path: lib_gen
  MainIs: pci_typegen_gen.ml
  BuildDepends: ctypes.stubs

Executable pci_typegen
  Install: false
  Path: lib_gen
  MainIs: pci_typegen.ml
  CSources: pci_typegen.c
  CCLib: -lpci
  CCOpt: -I $pkg_ctypes_stubs -o pci_typegen
  BuildTools: pci_typegen

Executable test_pci
  Build$:         flag(tests)
  Install:        false
  Path:           lib_test
  MainIs:         test_pci.ml
  CompiledObject: best
  BuildDepends:   pci

Test test_pci
  Command: $test_pci
